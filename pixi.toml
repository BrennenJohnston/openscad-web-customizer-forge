# Pixi environment configuration for OpenSCAD Assistive Forge
# https://pixi.sh/
#
# Optional: This file provides reproducible environment setup via pixi.
# The project works fine with standard npm commands - pixi is not required.
#
# To use pixi:
#   1. Install pixi: https://pixi.sh/latest/#installation
#   2. Run `pixi install` to set up the environment
#   3. Run tasks with `pixi run <task>`

[project]
name = "openscad-assistive-forge"
version = "4.0.0"
description = "Accessibility-first web-based OpenSCAD customizer"
channels = ["conda-forge"]
platforms = ["win-64", "linux-64", "osx-64", "osx-arm64"]

[dependencies]
nodejs = ">=20"

[tasks]
# Development
dev = "npm run dev"
build = "npm run build"
preview = "npm run preview"

# Testing
test = "npm run test:run"
"test:watch" = "npm run test:watch"
"test:e2e" = "npm run test:e2e"
"test:all" = "npm run test:all"
"test:coverage" = "npm run test:coverage"

# Code quality
lint = "npm run lint"
format = "npm run format"
"format:check" = "npm run format:check"

# Setup
setup = { depends-on = ["setup-deps", "setup-wasm", "setup-libraries"] }
"setup-deps" = "npm ci"
"setup-wasm" = "npm run setup-wasm"
"setup-libraries" = "npm run setup-libraries"

# Utilities
clean = { cmd = "rm -rf dist node_modules/.vite", description = "Clean build artifacts" }
"check-a11y" = "npm run check-a11y"

[feature.ci.tasks]
# CI-specific tasks
ci = "npm run test:run && npm run build"

[environments]
default = { features = [], solve-group = "default" }
ci = { features = ["ci"], solve-group = "default" }
